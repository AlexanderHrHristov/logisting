{% block content %}

{% if user.is_logistics or user.is_logistics_manager) %}
    <a href="{% url 'add_external_warehouse' %}" class="button">➕ Добави нов запис</a>
{% endif %}

<style>
  .white-table-container {
      background-color: white;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      max-width: 100%;
      overflow-x: auto;
  }
  table.white-table {
      border-collapse: collapse;
      width: 100%;
  }
  table.white-table th, table.white-table td {
      border: 1px solid #ccc;
      padding: 8px 12px;
      text-align: left;
  }
  table.white-table th {
      background-color: #f0f0f0;
  }
  a.button {
      display: inline-block;
      margin-bottom: 15px;
      padding: 8px 16px;
      background-color: #1976d2;
      color: white;
      text-decoration: none;
      border-radius: 4px;
      font-weight: bold;
  }
  a.button:hover {
      background-color: #135ba1;
  }
</style>

<form method="get" action=".">
    <label for="date-select">Избери дата:</label>
    <select id="date-select" name="date" onchange="this.form.submit()">
        {% for d in dates %}
            <option value="{{ d.date }}" {% if d.date == selected_date %}selected{% endif %}>
                {{ d.date }} ({{ d.day_name }})
            </option>
        {% endfor %}
    </select>
</form>

<div class="white-table-container">
  <table class="white-table">
      <thead>
          <tr>
              <th>Доставчик</th>
              <th>Локация</th>
              <th>Обем</th>
              <th>Термолабилни</th>
              <th>Наркотични</th>
              <th>Забележка</th>
              <th>Към транспорт</th>
              <th>Получено</th>
          </tr>
      </thead>
      <tbody>
          {% for record in records %}
              <tr>
                  <td>{{ record.supplier }}</td>
                  <td>{{ record.location }}</td>
                  <td>{{ record.volume }}</td>
                  <td>{% if record.thermolabile %}Да{% else %}Не{% endif %}</td>
                  <td>{% if record.narcotic %}Да{% else %}Не{% endif %}</td>
                  <td>{{ record.note }}</td>
                  <td>{{ record.driver }}</td>
                  <td>{% if record.received %}Да{% else %}Не{% endif %}</td>
              </tr>
          {% empty %}
              <tr>
                  <td colspan="8">Няма записи за тази дата.</td>
              </tr>
          {% endfor %}
      </tbody>
  </table>
</div>

{% endblock %}
