{% extends 'base.html' %}

{% block content %}
  <h2>Списък с доставчици</h2>

  {% if can_add_supplier %}
    <div class="mb-3">
      <!-- Увери се, че имаш URL име 'supplier-create' в urls.py -->
      <a href="{% url 'supplier-create' %}" class="btn btn-primary">➕ Добави нов доставчик</a>
    </div>
  {% endif %}

  <table class="table">
    <thead>
      <tr>
        <th>Доставчик</th>
        <th>Имейл</th>
        <th>Телефон</th>
        <th>Лице за контакт</th>
        <th>Доставя ли</th>
        <th>Отговорен логистик</th>
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for supplier in suppliers %}
        <tr>
          <td>{{ supplier.name }}</td>
          <td>{{ supplier.email }}</td>
          <td>{{ supplier.phone }}</td>
          <td>{{ supplier.contact_person }}</td>
          <td>{{ supplier.get_delivery_method_display }}</td>
          <td>
            {% if supplier.responsible_logistic %}
              {{ supplier.responsible_logistic.get_full_name }}
            {% else %}
              -
            {% endif %}
          </td>
          <td>
            {% if can_add_supplier %}
              <!-- Увери се, че имаш URL име 'supplier-update' и му предаваш id -->
              <a href="{% url 'supplier-update' supplier.id %}" class="btn btn-sm btn-warning">Редактирай</a>
            {% endif %}
            {% if user.is_logistics_manager %}
              <!-- Увери се, че имаш URL име 'supplier-delete' и му предаваш id -->
              <a href="{% url 'supplier-delete' supplier.id %}" class="btn btn-sm btn-danger">Изтрий</a>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
